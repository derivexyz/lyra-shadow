{"abi":[{"type":"function","name":"getImpactPrices","inputs":[],"outputs":[{"name":"bid","type":"uint256","internalType":"uint256"},{"name":"ask","type":"uint256","internalType":"uint256"}],"stateMutability":"view"},{"type":"function","name":"getIndexPrice","inputs":[],"outputs":[{"name":"","type":"uint256","internalType":"uint256"},{"name":"","type":"uint256","internalType":"uint256"}],"stateMutability":"view"},{"type":"function","name":"getPerpPrice","inputs":[],"outputs":[{"name":"","type":"uint256","internalType":"uint256"},{"name":"","type":"uint256","internalType":"uint256"}],"stateMutability":"view"},{"type":"function","name":"getUnsettledAndUnrealizedCash","inputs":[{"name":"accountId","type":"uint256","internalType":"uint256"}],"outputs":[{"name":"totalCash","type":"int256","internalType":"int256"}],"stateMutability":"view"},{"type":"function","name":"handleAdjustment","inputs":[{"name":"adjustment","type":"tuple","internalType":"struct ISubAccounts.AssetAdjustment","components":[{"name":"acc","type":"uint256","internalType":"uint256"},{"name":"asset","type":"address","internalType":"contract IAsset"},{"name":"subId","type":"uint256","internalType":"uint256"},{"name":"amount","type":"int256","internalType":"int256"},{"name":"assetData","type":"bytes32","internalType":"bytes32"}]},{"name":"tradeId","type":"uint256","internalType":"uint256"},{"name":"preBalance","type":"int256","internalType":"int256"},{"name":"manager","type":"address","internalType":"contract IManager"},{"name":"caller","type":"address","internalType":"address"}],"outputs":[{"name":"finalBalance","type":"int256","internalType":"int256"},{"name":"needAllowance","type":"bool","internalType":"bool"}],"stateMutability":"nonpayable"},{"type":"function","name":"openInterest","inputs":[{"name":"subId","type":"uint256","internalType":"uint256"}],"outputs":[{"name":"","type":"uint256","internalType":"uint256"}],"stateMutability":"view"},{"type":"function","name":"openInterestBeforeTrade","inputs":[{"name":"subId","type":"uint256","internalType":"uint256"},{"name":"tradeId","type":"uint256","internalType":"uint256"}],"outputs":[{"name":"","type":"bool","internalType":"bool"},{"name":"","type":"uint240","internalType":"uint240"}],"stateMutability":"view"},{"type":"function","name":"realizeAccountPNL","inputs":[{"name":"account","type":"uint256","internalType":"uint256"}],"outputs":[],"stateMutability":"nonpayable"},{"type":"function","name":"setTotalPositionCap","inputs":[{"name":"manager","type":"address","internalType":"contract IManager"},{"name":"oiCap","type":"uint256","internalType":"uint256"}],"outputs":[],"stateMutability":"nonpayable"},{"type":"function","name":"settleRealizedPNLAndFunding","inputs":[{"name":"accountId","type":"uint256","internalType":"uint256"}],"outputs":[{"name":"pnl","type":"int256","internalType":"int256"},{"name":"funding","type":"int256","internalType":"int256"}],"stateMutability":"nonpayable"},{"type":"function","name":"totalPosition","inputs":[{"name":"manager","type":"address","internalType":"contract IManager"}],"outputs":[{"name":"","type":"uint256","internalType":"uint256"}],"stateMutability":"view"},{"type":"function","name":"totalPositionBeforeTrade","inputs":[{"name":"manager","type":"address","internalType":"contract IManager"},{"name":"tradeId","type":"uint256","internalType":"uint256"}],"outputs":[{"name":"","type":"bool","internalType":"bool"},{"name":"","type":"uint240","internalType":"uint240"}],"stateMutability":"view"},{"type":"function","name":"totalPositionCap","inputs":[{"name":"manager","type":"address","internalType":"contract IManager"}],"outputs":[{"name":"","type":"uint256","internalType":"uint256"}],"stateMutability":"view"},{"type":"event","name":"AggregatedFundingUpdated","inputs":[{"name":"aggregatedFundingRate","type":"int256","indexed":false,"internalType":"int256"},{"name":"fundingRate","type":"int256","indexed":false,"internalType":"int256"},{"name":"lastFundingPaidAt","type":"uint256","indexed":false,"internalType":"uint256"}],"anonymous":false},{"type":"event","name":"ConvergencePeriodUpdated","inputs":[{"name":"fundingConvergencePeriod","type":"int256","indexed":false,"internalType":"int256"}],"anonymous":false},{"type":"event","name":"Disabled","inputs":[{"name":"indexPrice","type":"int256","indexed":false,"internalType":"int256"},{"name":"aggregatedFunding","type":"int256","indexed":false,"internalType":"int256"}],"anonymous":false},{"type":"event","name":"FundingAppliedOnAccount","inputs":[{"name":"accountId","type":"uint256","indexed":false,"internalType":"uint256"},{"name":"funding","type":"int256","indexed":false,"internalType":"int256"},{"name":"aggregatedFundingRate","type":"int256","indexed":false,"internalType":"int256"}],"anonymous":false},{"type":"event","name":"ImpactFeedsUpdated","inputs":[{"name":"askImpactFeed","type":"address","indexed":false,"internalType":"address"},{"name":"bidImpactFeed","type":"address","indexed":false,"internalType":"address"}],"anonymous":false},{"type":"event","name":"PerpFeedUpdated","inputs":[{"name":"perpFeed","type":"address","indexed":false,"internalType":"address"}],"anonymous":false},{"type":"event","name":"PositionCleared","inputs":[{"name":"account","type":"uint256","indexed":true,"internalType":"uint256"}],"anonymous":false},{"type":"event","name":"PositionSettled","inputs":[{"name":"account","type":"uint256","indexed":true,"internalType":"uint256"},{"name":"pnlChange","type":"int256","indexed":false,"internalType":"int256"},{"name":"totalPnl","type":"int256","indexed":false,"internalType":"int256"},{"name":"perpPrice","type":"uint256","indexed":false,"internalType":"uint256"}],"anonymous":false},{"type":"event","name":"RateBoundsUpdated","inputs":[{"name":"maxAbsRatePerHour","type":"int256","indexed":false,"internalType":"int256"}],"anonymous":false},{"type":"event","name":"SnapshotTaken","inputs":[{"name":"manager","type":"address","indexed":false,"internalType":"address"},{"name":"tradeId","type":"uint256","indexed":false,"internalType":"uint256"},{"name":"oi","type":"uint256","indexed":false,"internalType":"uint256"}],"anonymous":false},{"type":"event","name":"SpotFeedUpdated","inputs":[{"name":"spotFeed","type":"address","indexed":false,"internalType":"address"}],"anonymous":false},{"type":"event","name":"StaticUnderlyingInterestRateUpdated","inputs":[{"name":"premium","type":"int256","indexed":false,"internalType":"int256"}],"anonymous":false},{"type":"event","name":"SubIdSnapshotTaken","inputs":[{"name":"subId","type":"uint256","indexed":false,"internalType":"uint256"},{"name":"tradeId","type":"uint256","indexed":false,"internalType":"uint256"},{"name":"oi","type":"uint256","indexed":false,"internalType":"uint256"}],"anonymous":false},{"type":"event","name":"TotalPositionCapSet","inputs":[{"name":"manager","type":"address","indexed":false,"internalType":"address"},{"name":"oiCap","type":"uint256","indexed":false,"internalType":"uint256"}],"anonymous":false},{"type":"error","name":"PA_InvalidConvergencePeriod","inputs":[]},{"type":"error","name":"PA_InvalidImpactPrices","inputs":[]},{"type":"error","name":"PA_InvalidRateBounds","inputs":[]},{"type":"error","name":"PA_InvalidStaticInterestRate","inputs":[]},{"type":"error","name":"PA_InvalidSubId","inputs":[]},{"type":"error","name":"PA_WrongManager","inputs":[]},{"type":"error","name":"PT_CapExceeded","inputs":[]}],"bytecode":{"object":"0x","sourceMap":"","linkReferences":{}},"deployedBytecode":{"object":"0x","sourceMap":"","linkReferences":{}},"methodIdentifiers":{"getImpactPrices()":"394fce17","getIndexPrice()":"58c0994a","getPerpPrice()":"90f76b18","getUnsettledAndUnrealizedCash(uint256)":"7a4c2c3a","handleAdjustment((uint256,address,uint256,int256,bytes32),uint256,int256,address,address)":"8503eba9","openInterest(uint256)":"88e53ec8","openInterestBeforeTrade(uint256,uint256)":"2889fadf","realizeAccountPNL(uint256)":"b6baa389","setTotalPositionCap(address,uint256)":"40a557bd","settleRealizedPNLAndFunding(uint256)":"7540fec3","totalPosition(address)":"a9578774","totalPositionBeforeTrade(address,uint256)":"881ac96c","totalPositionCap(address)":"745ab570"},"rawMetadata":"{\"compiler\":{\"version\":\"0.8.18+commit.87f61d96\"},\"language\":\"Solidity\",\"output\":{\"abi\":[{\"inputs\":[],\"name\":\"PA_InvalidConvergencePeriod\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"PA_InvalidImpactPrices\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"PA_InvalidRateBounds\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"PA_InvalidStaticInterestRate\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"PA_InvalidSubId\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"PA_WrongManager\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"PT_CapExceeded\",\"type\":\"error\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"internalType\":\"int256\",\"name\":\"aggregatedFundingRate\",\"type\":\"int256\"},{\"indexed\":false,\"internalType\":\"int256\",\"name\":\"fundingRate\",\"type\":\"int256\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"lastFundingPaidAt\",\"type\":\"uint256\"}],\"name\":\"AggregatedFundingUpdated\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"internalType\":\"int256\",\"name\":\"fundingConvergencePeriod\",\"type\":\"int256\"}],\"name\":\"ConvergencePeriodUpdated\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"internalType\":\"int256\",\"name\":\"indexPrice\",\"type\":\"int256\"},{\"indexed\":false,\"internalType\":\"int256\",\"name\":\"aggregatedFunding\",\"type\":\"int256\"}],\"name\":\"Disabled\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"accountId\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"int256\",\"name\":\"funding\",\"type\":\"int256\"},{\"indexed\":false,\"internalType\":\"int256\",\"name\":\"aggregatedFundingRate\",\"type\":\"int256\"}],\"name\":\"FundingAppliedOnAccount\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"internalType\":\"address\",\"name\":\"askImpactFeed\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"address\",\"name\":\"bidImpactFeed\",\"type\":\"address\"}],\"name\":\"ImpactFeedsUpdated\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"internalType\":\"address\",\"name\":\"perpFeed\",\"type\":\"address\"}],\"name\":\"PerpFeedUpdated\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"uint256\",\"name\":\"account\",\"type\":\"uint256\"}],\"name\":\"PositionCleared\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"uint256\",\"name\":\"account\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"int256\",\"name\":\"pnlChange\",\"type\":\"int256\"},{\"indexed\":false,\"internalType\":\"int256\",\"name\":\"totalPnl\",\"type\":\"int256\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"perpPrice\",\"type\":\"uint256\"}],\"name\":\"PositionSettled\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"internalType\":\"int256\",\"name\":\"maxAbsRatePerHour\",\"type\":\"int256\"}],\"name\":\"RateBoundsUpdated\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"internalType\":\"address\",\"name\":\"manager\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"tradeId\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"oi\",\"type\":\"uint256\"}],\"name\":\"SnapshotTaken\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"internalType\":\"address\",\"name\":\"spotFeed\",\"type\":\"address\"}],\"name\":\"SpotFeedUpdated\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"internalType\":\"int256\",\"name\":\"premium\",\"type\":\"int256\"}],\"name\":\"StaticUnderlyingInterestRateUpdated\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"subId\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"tradeId\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"oi\",\"type\":\"uint256\"}],\"name\":\"SubIdSnapshotTaken\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"internalType\":\"address\",\"name\":\"manager\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"oiCap\",\"type\":\"uint256\"}],\"name\":\"TotalPositionCapSet\",\"type\":\"event\"},{\"inputs\":[],\"name\":\"getImpactPrices\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"bid\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"ask\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"getIndexPrice\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"getPerpPrice\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"accountId\",\"type\":\"uint256\"}],\"name\":\"getUnsettledAndUnrealizedCash\",\"outputs\":[{\"internalType\":\"int256\",\"name\":\"totalCash\",\"type\":\"int256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"components\":[{\"internalType\":\"uint256\",\"name\":\"acc\",\"type\":\"uint256\"},{\"internalType\":\"contract IAsset\",\"name\":\"asset\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"subId\",\"type\":\"uint256\"},{\"internalType\":\"int256\",\"name\":\"amount\",\"type\":\"int256\"},{\"internalType\":\"bytes32\",\"name\":\"assetData\",\"type\":\"bytes32\"}],\"internalType\":\"struct ISubAccounts.AssetAdjustment\",\"name\":\"adjustment\",\"type\":\"tuple\"},{\"internalType\":\"uint256\",\"name\":\"tradeId\",\"type\":\"uint256\"},{\"internalType\":\"int256\",\"name\":\"preBalance\",\"type\":\"int256\"},{\"internalType\":\"contract IManager\",\"name\":\"manager\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"caller\",\"type\":\"address\"}],\"name\":\"handleAdjustment\",\"outputs\":[{\"internalType\":\"int256\",\"name\":\"finalBalance\",\"type\":\"int256\"},{\"internalType\":\"bool\",\"name\":\"needAllowance\",\"type\":\"bool\"}],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"subId\",\"type\":\"uint256\"}],\"name\":\"openInterest\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"subId\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"tradeId\",\"type\":\"uint256\"}],\"name\":\"openInterestBeforeTrade\",\"outputs\":[{\"internalType\":\"bool\",\"name\":\"\",\"type\":\"bool\"},{\"internalType\":\"uint240\",\"name\":\"\",\"type\":\"uint240\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"account\",\"type\":\"uint256\"}],\"name\":\"realizeAccountPNL\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"contract IManager\",\"name\":\"manager\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"oiCap\",\"type\":\"uint256\"}],\"name\":\"setTotalPositionCap\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"accountId\",\"type\":\"uint256\"}],\"name\":\"settleRealizedPNLAndFunding\",\"outputs\":[{\"internalType\":\"int256\",\"name\":\"pnl\",\"type\":\"int256\"},{\"internalType\":\"int256\",\"name\":\"funding\",\"type\":\"int256\"}],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"contract IManager\",\"name\":\"manager\",\"type\":\"address\"}],\"name\":\"totalPosition\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"contract IManager\",\"name\":\"manager\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"tradeId\",\"type\":\"uint256\"}],\"name\":\"totalPositionBeforeTrade\",\"outputs\":[{\"internalType\":\"bool\",\"name\":\"\",\"type\":\"bool\"},{\"internalType\":\"uint240\",\"name\":\"\",\"type\":\"uint240\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"contract IManager\",\"name\":\"manager\",\"type\":\"address\"}],\"name\":\"totalPositionCap\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"}],\"devdoc\":{\"errors\":{\"PA_InvalidImpactPrices()\":[{\"details\":\"Impact prices are invalid: bids higher than ask or negative\"}],\"PA_InvalidSubId()\":[{\"details\":\"SubId is not 0\"}],\"PA_WrongManager()\":[{\"details\":\"Settlement can only be initiated by the manager of the account\"}],\"PT_CapExceeded()\":[{\"details\":\"Reverts if total position exceeds cap\"}]},\"events\":{\"SnapshotTaken(address,uint256,uint256)\":{\"details\":\"Emitted when snapshot is taken for totalOi\"},\"SubIdSnapshotTaken(uint256,uint256,uint256)\":{\"details\":\"Emitted when oi is snapshot for given subId\"},\"TotalPositionCapSet(address,uint256)\":{\"details\":\"Emitted when OI cap is set\"}},\"kind\":\"dev\",\"methods\":{\"handleAdjustment((uint256,address,uint256,int256,bytes32),uint256,int256,address,address)\":{\"params\":{\"adjustment\":\"details about adjustment, containing account, subId, amount\",\"caller\":\"the msg.sender that initiate the transfer. might not be the owner\",\"manager\":\"the manager contract that will verify the end state. Should verify if this is a trusted manager\",\"preBalance\":\"balance before adjustment\",\"tradeId\":\"unique number attached to a batched transfers.                It is possible that this hook will receive multiple calls with different tradeIds within 1 transaction.\"},\"returns\":{\"finalBalance\":\"the final balance to be recorded in the account\",\"needAllowance\":\"if this adjustment should require allowance from non-ERC721 approved initiator\"}},\"settleRealizedPNLAndFunding(uint256)\":{\"details\":\"The manager should then update the cash balance of an account base on the returned netCash variable\"}},\"title\":\"IPerpAsset\",\"version\":1},\"userdoc\":{\"kind\":\"user\",\"methods\":{\"handleAdjustment((uint256,address,uint256,int256,bytes32),uint256,int256,address,address)\":{\"notice\":\"triggered when an adjustment is triggered on the asset balance\"},\"settleRealizedPNLAndFunding(uint256)\":{\"notice\":\"Manager-only function to clear pnl and funding during settlement\"}},\"notice\":\"Interface for a perpetual asset contract that extends the IAsset interface.\",\"version\":1}},\"settings\":{\"compilationTarget\":{\"src/interfaces/IPerpAsset.sol\":\"IPerpAsset\"},\"evmVersion\":\"paris\",\"libraries\":{},\"metadata\":{\"bytecodeHash\":\"none\"},\"optimizer\":{\"enabled\":true,\"runs\":800},\"remappings\":[\":chainlink/=lib/chainlink/\",\":ds-test/=lib/forge-std/lib/ds-test/src/\",\":erc4626-tests/=lib/openzeppelin-contracts/lib/erc4626-tests/\",\":forge-std/=lib/forge-std/src/\",\":lib/lyra-utils/=lib/lyra-utils/\",\":lib/openzeppelin-contracts/=lib/openzeppelin-contracts/\",\":lyra-utils/=lib/lyra-utils/src/\",\":openzeppelin-contracts-upgradeable/=lib/openzeppelin-contracts-upgradeable/\",\":openzeppelin-contracts/=lib/openzeppelin-contracts/\",\":openzeppelin-upgradeable/=lib/openzeppelin-contracts-upgradeable/contracts/\",\":openzeppelin/=lib/openzeppelin-contracts/contracts/\",\":src/decimals/=lib/lyra-utils/src/decimals/\",\":src/interfaces/=src/interfaces/\",\":src/risk-managers/=src/risk-managers/\"]},\"sources\":{\"lib/openzeppelin-contracts/contracts/token/ERC721/IERC721.sol\":{\"keccak256\":\"0x41bbb2c41036ca64b2f6c9e973e8cfaa113ebc42af86702cd0d267f915a7e886\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://6bf6699c55e82c7af6ae90b61ea9643ca0c905097da9a31269319f1b5a2a696a\",\"dweb:/ipfs/QmRJZa2UmWcRo6W8JnuomwzfjVtAS21QC8HKggxBhoPsU4\"]},\"lib/openzeppelin-contracts/contracts/utils/introspection/IERC165.sol\":{\"keccak256\":\"0x447a5f3ddc18419d41ff92b3773fb86471b1db25773e07f877f548918a185bf1\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://be161e54f24e5c6fae81a12db1a8ae87bc5ae1b0ddc805d82a1440a68455088f\",\"dweb:/ipfs/QmP7C3CHdY9urF4dEMb9wmsp1wMxHF6nhA2yQE5SKiPAdy\"]},\"src/interfaces/IAllowances.sol\":{\"keccak256\":\"0x53acb29f236a4b2d6c9ebcbd4d2f8a65eeb0049b35b33a950467699987141dfb\",\"license\":\"BUSL-1.1\",\"urls\":[\"bzz-raw://59743a7e65b252241e5bbb158ab69ba55eb2118d84b5020510b486483cd1578b\",\"dweb:/ipfs/QmTMKUpN8sW1oXb5gjEXXY7d8FRAaJotf6MtDW1rG49vSo\"]},\"src/interfaces/IAsset.sol\":{\"keccak256\":\"0xe2d55d7aaddcb04cc002b32f464d57d001800d9bd959cd1a5c60f78bd78e6bcb\",\"license\":\"BUSL-1.1\",\"urls\":[\"bzz-raw://7af70cb014b81f4272e862f87c9ca027ba8aed9d72d5c1a9ca28b7f05edf8389\",\"dweb:/ipfs/QmZfdNtWQrXLu3avyJiWEVBfEvj5EwbwwtZtczLm7PcRei\"]},\"src/interfaces/IGlobalSubIdOITracking.sol\":{\"keccak256\":\"0xf253dff1a90efce836e42473637a8f1363b0cac89ceb310aa20b2372d55bc609\",\"license\":\"BUSL-1.1\",\"urls\":[\"bzz-raw://d9a68b46c8438166a992cc34514c87db956fcbebbfa5570043df0331277d7607\",\"dweb:/ipfs/QmYt3iAp36Ahy8eiuQjYphAbvuv6fftvJsGtmgSJAJJSwf\"]},\"src/interfaces/IManager.sol\":{\"keccak256\":\"0x3cea09b9ade8f5882374407dfb3a9b668c0c2b0a85c165cabdbafdbea891b3df\",\"license\":\"BUSL-1.1\",\"urls\":[\"bzz-raw://2f9af85d7fd8bb32c9344f21b0dd3cfb9485f6c3f9ca866c8adb0638acc7e3b9\",\"dweb:/ipfs/QmbL1te91vqCbYLxxvpxFGhqCXUzQwiKZuZjY5XNkQqt4s\"]},\"src/interfaces/IPerpAsset.sol\":{\"keccak256\":\"0x336936ee26b007a46fd295be4a2ae1fd332f336a15994b69b2fc370b1523b505\",\"license\":\"BUSL-1.1\",\"urls\":[\"bzz-raw://236aeffb3fbd129385f25de6e2c727bfa4a1aa75a8f0bb307760cd44f54a8911\",\"dweb:/ipfs/QmaB6DiHE26wGTG795WSdiaHSnnkYkxFR9b8ojX1mQdRHw\"]},\"src/interfaces/IPositionTracking.sol\":{\"keccak256\":\"0xdf2d7be4eac88d976e97e7fe004f82e2f0c5cb62549f9ee20f82113eb9a7a1b6\",\"license\":\"BUSL-1.1\",\"urls\":[\"bzz-raw://05cac68603e0cadcb67645fdae2a0b64c6f465b543c4b078d4b4665053a67134\",\"dweb:/ipfs/Qmedf3juVgT1cQS2PDHnXhoEtLe4n5bUpLaRumBgVSrBbG\"]},\"src/interfaces/ISubAccounts.sol\":{\"keccak256\":\"0xecdbfdf0bf85279ee7839968c3198c6a7c5632378d197271300617a01dfb02f7\",\"license\":\"BUSL-1.1\",\"urls\":[\"bzz-raw://64e23c1447aa8de056c7d5bc8d79c1357f039e443abe6d6698c6f0a1f3482697\",\"dweb:/ipfs/QmQzgG2EX6gZgzTArDkxMFRkph3bWH7VjnqEebkmhbCjLK\"]}},\"version\":1}","metadata":{"compiler":{"version":"0.8.18+commit.87f61d96"},"language":"Solidity","output":{"abi":[{"inputs":[],"type":"error","name":"PA_InvalidConvergencePeriod"},{"inputs":[],"type":"error","name":"PA_InvalidImpactPrices"},{"inputs":[],"type":"error","name":"PA_InvalidRateBounds"},{"inputs":[],"type":"error","name":"PA_InvalidStaticInterestRate"},{"inputs":[],"type":"error","name":"PA_InvalidSubId"},{"inputs":[],"type":"error","name":"PA_WrongManager"},{"inputs":[],"type":"error","name":"PT_CapExceeded"},{"inputs":[{"internalType":"int256","name":"aggregatedFundingRate","type":"int256","indexed":false},{"internalType":"int256","name":"fundingRate","type":"int256","indexed":false},{"internalType":"uint256","name":"lastFundingPaidAt","type":"uint256","indexed":false}],"type":"event","name":"AggregatedFundingUpdated","anonymous":false},{"inputs":[{"internalType":"int256","name":"fundingConvergencePeriod","type":"int256","indexed":false}],"type":"event","name":"ConvergencePeriodUpdated","anonymous":false},{"inputs":[{"internalType":"int256","name":"indexPrice","type":"int256","indexed":false},{"internalType":"int256","name":"aggregatedFunding","type":"int256","indexed":false}],"type":"event","name":"Disabled","anonymous":false},{"inputs":[{"internalType":"uint256","name":"accountId","type":"uint256","indexed":false},{"internalType":"int256","name":"funding","type":"int256","indexed":false},{"internalType":"int256","name":"aggregatedFundingRate","type":"int256","indexed":false}],"type":"event","name":"FundingAppliedOnAccount","anonymous":false},{"inputs":[{"internalType":"address","name":"askImpactFeed","type":"address","indexed":false},{"internalType":"address","name":"bidImpactFeed","type":"address","indexed":false}],"type":"event","name":"ImpactFeedsUpdated","anonymous":false},{"inputs":[{"internalType":"address","name":"perpFeed","type":"address","indexed":false}],"type":"event","name":"PerpFeedUpdated","anonymous":false},{"inputs":[{"internalType":"uint256","name":"account","type":"uint256","indexed":true}],"type":"event","name":"PositionCleared","anonymous":false},{"inputs":[{"internalType":"uint256","name":"account","type":"uint256","indexed":true},{"internalType":"int256","name":"pnlChange","type":"int256","indexed":false},{"internalType":"int256","name":"totalPnl","type":"int256","indexed":false},{"internalType":"uint256","name":"perpPrice","type":"uint256","indexed":false}],"type":"event","name":"PositionSettled","anonymous":false},{"inputs":[{"internalType":"int256","name":"maxAbsRatePerHour","type":"int256","indexed":false}],"type":"event","name":"RateBoundsUpdated","anonymous":false},{"inputs":[{"internalType":"address","name":"manager","type":"address","indexed":false},{"internalType":"uint256","name":"tradeId","type":"uint256","indexed":false},{"internalType":"uint256","name":"oi","type":"uint256","indexed":false}],"type":"event","name":"SnapshotTaken","anonymous":false},{"inputs":[{"internalType":"address","name":"spotFeed","type":"address","indexed":false}],"type":"event","name":"SpotFeedUpdated","anonymous":false},{"inputs":[{"internalType":"int256","name":"premium","type":"int256","indexed":false}],"type":"event","name":"StaticUnderlyingInterestRateUpdated","anonymous":false},{"inputs":[{"internalType":"uint256","name":"subId","type":"uint256","indexed":false},{"internalType":"uint256","name":"tradeId","type":"uint256","indexed":false},{"internalType":"uint256","name":"oi","type":"uint256","indexed":false}],"type":"event","name":"SubIdSnapshotTaken","anonymous":false},{"inputs":[{"internalType":"address","name":"manager","type":"address","indexed":false},{"internalType":"uint256","name":"oiCap","type":"uint256","indexed":false}],"type":"event","name":"TotalPositionCapSet","anonymous":false},{"inputs":[],"stateMutability":"view","type":"function","name":"getImpactPrices","outputs":[{"internalType":"uint256","name":"bid","type":"uint256"},{"internalType":"uint256","name":"ask","type":"uint256"}]},{"inputs":[],"stateMutability":"view","type":"function","name":"getIndexPrice","outputs":[{"internalType":"uint256","name":"","type":"uint256"},{"internalType":"uint256","name":"","type":"uint256"}]},{"inputs":[],"stateMutability":"view","type":"function","name":"getPerpPrice","outputs":[{"internalType":"uint256","name":"","type":"uint256"},{"internalType":"uint256","name":"","type":"uint256"}]},{"inputs":[{"internalType":"uint256","name":"accountId","type":"uint256"}],"stateMutability":"view","type":"function","name":"getUnsettledAndUnrealizedCash","outputs":[{"internalType":"int256","name":"totalCash","type":"int256"}]},{"inputs":[{"internalType":"struct ISubAccounts.AssetAdjustment","name":"adjustment","type":"tuple","components":[{"internalType":"uint256","name":"acc","type":"uint256"},{"internalType":"contract IAsset","name":"asset","type":"address"},{"internalType":"uint256","name":"subId","type":"uint256"},{"internalType":"int256","name":"amount","type":"int256"},{"internalType":"bytes32","name":"assetData","type":"bytes32"}]},{"internalType":"uint256","name":"tradeId","type":"uint256"},{"internalType":"int256","name":"preBalance","type":"int256"},{"internalType":"contract IManager","name":"manager","type":"address"},{"internalType":"address","name":"caller","type":"address"}],"stateMutability":"nonpayable","type":"function","name":"handleAdjustment","outputs":[{"internalType":"int256","name":"finalBalance","type":"int256"},{"internalType":"bool","name":"needAllowance","type":"bool"}]},{"inputs":[{"internalType":"uint256","name":"subId","type":"uint256"}],"stateMutability":"view","type":"function","name":"openInterest","outputs":[{"internalType":"uint256","name":"","type":"uint256"}]},{"inputs":[{"internalType":"uint256","name":"subId","type":"uint256"},{"internalType":"uint256","name":"tradeId","type":"uint256"}],"stateMutability":"view","type":"function","name":"openInterestBeforeTrade","outputs":[{"internalType":"bool","name":"","type":"bool"},{"internalType":"uint240","name":"","type":"uint240"}]},{"inputs":[{"internalType":"uint256","name":"account","type":"uint256"}],"stateMutability":"nonpayable","type":"function","name":"realizeAccountPNL"},{"inputs":[{"internalType":"contract IManager","name":"manager","type":"address"},{"internalType":"uint256","name":"oiCap","type":"uint256"}],"stateMutability":"nonpayable","type":"function","name":"setTotalPositionCap"},{"inputs":[{"internalType":"uint256","name":"accountId","type":"uint256"}],"stateMutability":"nonpayable","type":"function","name":"settleRealizedPNLAndFunding","outputs":[{"internalType":"int256","name":"pnl","type":"int256"},{"internalType":"int256","name":"funding","type":"int256"}]},{"inputs":[{"internalType":"contract IManager","name":"manager","type":"address"}],"stateMutability":"view","type":"function","name":"totalPosition","outputs":[{"internalType":"uint256","name":"","type":"uint256"}]},{"inputs":[{"internalType":"contract IManager","name":"manager","type":"address"},{"internalType":"uint256","name":"tradeId","type":"uint256"}],"stateMutability":"view","type":"function","name":"totalPositionBeforeTrade","outputs":[{"internalType":"bool","name":"","type":"bool"},{"internalType":"uint240","name":"","type":"uint240"}]},{"inputs":[{"internalType":"contract IManager","name":"manager","type":"address"}],"stateMutability":"view","type":"function","name":"totalPositionCap","outputs":[{"internalType":"uint256","name":"","type":"uint256"}]}],"devdoc":{"kind":"dev","methods":{"handleAdjustment((uint256,address,uint256,int256,bytes32),uint256,int256,address,address)":{"params":{"adjustment":"details about adjustment, containing account, subId, amount","caller":"the msg.sender that initiate the transfer. might not be the owner","manager":"the manager contract that will verify the end state. Should verify if this is a trusted manager","preBalance":"balance before adjustment","tradeId":"unique number attached to a batched transfers.                It is possible that this hook will receive multiple calls with different tradeIds within 1 transaction."},"returns":{"finalBalance":"the final balance to be recorded in the account","needAllowance":"if this adjustment should require allowance from non-ERC721 approved initiator"}},"settleRealizedPNLAndFunding(uint256)":{"details":"The manager should then update the cash balance of an account base on the returned netCash variable"}},"version":1},"userdoc":{"kind":"user","methods":{"handleAdjustment((uint256,address,uint256,int256,bytes32),uint256,int256,address,address)":{"notice":"triggered when an adjustment is triggered on the asset balance"},"settleRealizedPNLAndFunding(uint256)":{"notice":"Manager-only function to clear pnl and funding during settlement"}},"version":1}},"settings":{"remappings":["chainlink/=lib/chainlink/","ds-test/=lib/forge-std/lib/ds-test/src/","erc4626-tests/=lib/openzeppelin-contracts/lib/erc4626-tests/","forge-std/=lib/forge-std/src/","lib/lyra-utils/=lib/lyra-utils/","lib/openzeppelin-contracts/=lib/openzeppelin-contracts/","lyra-utils/=lib/lyra-utils/src/","openzeppelin-contracts-upgradeable/=lib/openzeppelin-contracts-upgradeable/","openzeppelin-contracts/=lib/openzeppelin-contracts/","openzeppelin-upgradeable/=lib/openzeppelin-contracts-upgradeable/contracts/","openzeppelin/=lib/openzeppelin-contracts/contracts/","src/decimals/=lib/lyra-utils/src/decimals/","src/interfaces/=src/interfaces/","src/risk-managers/=src/risk-managers/"],"optimizer":{"enabled":true,"runs":800},"metadata":{"bytecodeHash":"none"},"compilationTarget":{"src/interfaces/IPerpAsset.sol":"IPerpAsset"},"evmVersion":"paris","libraries":{}},"sources":{"lib/openzeppelin-contracts/contracts/token/ERC721/IERC721.sol":{"keccak256":"0x41bbb2c41036ca64b2f6c9e973e8cfaa113ebc42af86702cd0d267f915a7e886","urls":["bzz-raw://6bf6699c55e82c7af6ae90b61ea9643ca0c905097da9a31269319f1b5a2a696a","dweb:/ipfs/QmRJZa2UmWcRo6W8JnuomwzfjVtAS21QC8HKggxBhoPsU4"],"license":"MIT"},"lib/openzeppelin-contracts/contracts/utils/introspection/IERC165.sol":{"keccak256":"0x447a5f3ddc18419d41ff92b3773fb86471b1db25773e07f877f548918a185bf1","urls":["bzz-raw://be161e54f24e5c6fae81a12db1a8ae87bc5ae1b0ddc805d82a1440a68455088f","dweb:/ipfs/QmP7C3CHdY9urF4dEMb9wmsp1wMxHF6nhA2yQE5SKiPAdy"],"license":"MIT"},"src/interfaces/IAllowances.sol":{"keccak256":"0x53acb29f236a4b2d6c9ebcbd4d2f8a65eeb0049b35b33a950467699987141dfb","urls":["bzz-raw://59743a7e65b252241e5bbb158ab69ba55eb2118d84b5020510b486483cd1578b","dweb:/ipfs/QmTMKUpN8sW1oXb5gjEXXY7d8FRAaJotf6MtDW1rG49vSo"],"license":"BUSL-1.1"},"src/interfaces/IAsset.sol":{"keccak256":"0xe2d55d7aaddcb04cc002b32f464d57d001800d9bd959cd1a5c60f78bd78e6bcb","urls":["bzz-raw://7af70cb014b81f4272e862f87c9ca027ba8aed9d72d5c1a9ca28b7f05edf8389","dweb:/ipfs/QmZfdNtWQrXLu3avyJiWEVBfEvj5EwbwwtZtczLm7PcRei"],"license":"BUSL-1.1"},"src/interfaces/IGlobalSubIdOITracking.sol":{"keccak256":"0xf253dff1a90efce836e42473637a8f1363b0cac89ceb310aa20b2372d55bc609","urls":["bzz-raw://d9a68b46c8438166a992cc34514c87db956fcbebbfa5570043df0331277d7607","dweb:/ipfs/QmYt3iAp36Ahy8eiuQjYphAbvuv6fftvJsGtmgSJAJJSwf"],"license":"BUSL-1.1"},"src/interfaces/IManager.sol":{"keccak256":"0x3cea09b9ade8f5882374407dfb3a9b668c0c2b0a85c165cabdbafdbea891b3df","urls":["bzz-raw://2f9af85d7fd8bb32c9344f21b0dd3cfb9485f6c3f9ca866c8adb0638acc7e3b9","dweb:/ipfs/QmbL1te91vqCbYLxxvpxFGhqCXUzQwiKZuZjY5XNkQqt4s"],"license":"BUSL-1.1"},"src/interfaces/IPerpAsset.sol":{"keccak256":"0x336936ee26b007a46fd295be4a2ae1fd332f336a15994b69b2fc370b1523b505","urls":["bzz-raw://236aeffb3fbd129385f25de6e2c727bfa4a1aa75a8f0bb307760cd44f54a8911","dweb:/ipfs/QmaB6DiHE26wGTG795WSdiaHSnnkYkxFR9b8ojX1mQdRHw"],"license":"BUSL-1.1"},"src/interfaces/IPositionTracking.sol":{"keccak256":"0xdf2d7be4eac88d976e97e7fe004f82e2f0c5cb62549f9ee20f82113eb9a7a1b6","urls":["bzz-raw://05cac68603e0cadcb67645fdae2a0b64c6f465b543c4b078d4b4665053a67134","dweb:/ipfs/Qmedf3juVgT1cQS2PDHnXhoEtLe4n5bUpLaRumBgVSrBbG"],"license":"BUSL-1.1"},"src/interfaces/ISubAccounts.sol":{"keccak256":"0xecdbfdf0bf85279ee7839968c3198c6a7c5632378d197271300617a01dfb02f7","urls":["bzz-raw://64e23c1447aa8de056c7d5bc8d79c1357f039e443abe6d6698c6f0a1f3482697","dweb:/ipfs/QmQzgG2EX6gZgzTArDkxMFRkph3bWH7VjnqEebkmhbCjLK"],"license":"BUSL-1.1"}},"version":1},"id":31}